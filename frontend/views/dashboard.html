<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Financiero - TOO-EASY</title>
    
    <!-- âœ… CSS CORREGIDOS -->
    <link rel="stylesheet" href="../public/css/dashboard.css"> 
    <link rel="stylesheet" href="../public/css/header.css">
    
    <!-- Chart.js para las grÃ¡ficas -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- ========================================
     ENCABEZADO CON NAVEGACIÃ“N
     ======================================== -->
<header class="header">
    <div class="logo">
        <h1>TOO-EASY</h1>
        <p>JUEGA HOY, TRIUNFA MAÃ‘ANA</p>
    </div>

    <nav class="nav">
        <a href="dashboard.html">DASHBOARD</a>
        <a href="retos.html">RETOS</a>
        <a href="lecciones.html">LECCIONES</a>
        <a href="perfil.html">PERFIL</a>
        <!-- âœ… ID IMPORTANTE: logout-btn -->
        <a href="#" id="logout-btn">
            <img src="../public/icons/salida.png" alt="Salir" style="width: 24px; height: 24px;">
        </a> 
    </nav>
</header>

<!-- ========================================
     CONTENEDOR PRINCIPAL
     ======================================== -->
<div class="app-container">
    
    <!-- âœ… Saludo Personalizado (Se llena con JS) -->
    <div class="main-header" style="padding: 1rem;">
        <h1 id="user-greeting">Cargando...</h1>
    </div>

    <!-- ========================================
         COLUMNA IZQUIERDA: RESUMEN Y GRÃFICAS
         ======================================== -->
    <div class="izquierda">
        <section class="card module-calculator">
            <h2>Resumen Mensual y Metas ðŸ“Š</h2>
            
            <!-- Datos Fijos: Ingreso y Egreso -->
            <div class="fixed-data-grid">
                <div class="input-group">
                    <label for="fixed-income">Ingreso Fijo Mensual ($)</label>
                    <input type="number" id="fixed-income" placeholder="0.00" step="10.00">
                </div>
                
                <div class="input-group">
                    <label for="fixed-expense">Egreso Fijo Mensual ($)</label>
                    <input type="number" id="fixed-expense" placeholder="0.00" step="10.00">
                </div>
            </div>

            <!-- Datos de Meta -->
            <div class="goal-data-grid">
                <div class="input-group">
                    <label for="goal-name">Nombre de Meta</label>
                    <input type="text" id="goal-name" placeholder="Ej: Vacaciones" maxlength="50">
                </div>
                
                <div class="input-group">
                    <label for="goal-amount">Monto de Meta ($)</label>
                    <input type="number" id="goal-amount" placeholder="0.00" step="10.00">
                </div>
            </div>

            <!-- Resumen de Resultados -->
            <div class="summary-results">
                <div class="result-item">
                    <span>Ahorro Actual:</span>
                    <strong id="calculated-savings">$0.00</strong>
                </div>
                <div class="result-item">
                    <span>Falta para Meta:</span>
                    <strong id="calculated-remaining">$0.00</strong>
                </div>
                <div class="result-item">
                    <span>Estado:</span>
                    <strong id="goal-status">Sin datos</strong>
                </div>
            </div>

            <!-- GrÃ¡fica de Barras -->
            <div class="chart-container">
                <canvas id="monthlyChart"></canvas>
            </div>
        </section>
    </div>
        
    <!-- ========================================
         COLUMNA DERECHA: CALENDARIO
         ======================================== -->
    <div class="derecha">
        <section class="card module-calendar">
            <h2>Calendario de Movimientos ðŸ“…</h2>
            
            <!-- Controles del Calendario -->
            <div class="calendar-header">
                <button id="prev-month">&lt;</button>
                <h2 id="current-month-year">Cargando...</h2>
                <button id="next-month">&gt;</button>
            </div>
            
            <!-- Grid del Calendario (Se llena con JS) -->
            <div id="calendar-grid" class="calendar-grid">
                <!-- Los dÃ­as se inyectan dinÃ¡micamente -->
            </div>
        </section>
    </div>

    <!-- ========================================
         MODAL DE DETALLE DEL DÃA
         ======================================== -->
    <div id="day-modal" class="modal hidden">
        <div class="modal-content">
            <!-- BotÃ³n Cerrar -->
            <span id="close-modal" class="close-btn">&times;</span>
            
            <!-- TÃ­tulo del DÃ­a -->
            <h2 id="modal-date-title">Detalle del DÃ­a</h2>
            
            <!-- Resumen del Balance del DÃ­a -->
            <div class="day-balance-summary">
                <div class="balance-item">
                    <span>Ingresos:</span> 
                    <span id="day-income" class="text-green">$0</span>
                </div>
                <div class="balance-item">
                    <span>Egresos:</span> 
                    <span id="day-expense" class="text-red">$0</span>
                </div>
                <div class="balance-item total">
                    <span>Balance:</span> 
                    <strong id="day-total">$0</strong>
                </div>
            </div>

            <!-- Recomendaciones Financieras -->
            <div class="recommendations-section">
                <h3>ðŸ’¡ Recomendaciones del dÃ­a</h3>
                <ul id="recommendations-list">
                    <!-- Se llenan con JS -->
                </ul>
            </div>

            <!-- Lista de Movimientos del DÃ­a -->
            <div class="movements-list-section">
                <h3>Movimientos Registrados</h3>
                <ul id="movements-list">
                    <!-- Se llenan con JS -->
                </ul>
            </div>

            <!-- Formulario para Agregar Movimiento -->
            <div class="add-movement-form">
                <h3>âž• Nuevo Movimiento</h3>
                <form id="transaction-form">
                    <!-- Tipo de Movimiento -->
                    <select id="trans-type" required>
                        <option value="expense">Egreso (-)</option>
                        <option value="income">Ingreso (+)</option>
                    </select>
                    
                    <!-- CategorÃ­a -->
                    <input 
                        type="text" 
                        id="trans-category" 
                        placeholder="CategorÃ­a (ej: Comida, Transporte, Deuda)" 
                        required
                    >

                    <!-- Monto -->
                    <input 
                        type="number" 
                        id="trans-amount" 
                        placeholder="Monto" 
                        step="0.01" 
                        min="0.01"
                        required
                    >
                    
                    <!-- BotÃ³n Agregar -->
                    <button type="submit" class="btn-add">Agregar Movimiento</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- ========================================
     SCRIPT CONECTADO AL BACKEND
     ======================================== -->
<script type="module" src="../public/js/pages/dashboard.js"></script>

</body>
</html>